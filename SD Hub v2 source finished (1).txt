--[[
	WARNING: Heads up! This script has not been verified by ScriptBlox. Use at your own risk!
    
    -- SD HUB INTRO ANIMATION --
]]
repeat task.wait() until game:IsLoaded()

local Players      = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local RunService   = game:GetService("RunService")
local Lighting     = game:GetService("Lighting")
local UserInputService = game:GetService("UserInputService") -- Added for the main script

local LocalPlayer = Players.LocalPlayer or Players.PlayerAdded:Wait()


local CFG = {
	size        = 270,
	thickness   = 18,
	corner      = 24,
	duration    = 7,    
	spinDeg     = 95,
	spinSpeed   = 175, -- Current smooth spin speed
	breathMin   = 0.985,
	breathMax   = 1.02,
	bubbleCount = 4,
	bubbleScale = 2.7,
	bubbleGap   = 0.12,
	creditText  = "-- SD Hub V2 --", 
	rainbowSeconds = 1.0, 
	rainbowTurns   = 1.25 
}

local BLUE_LIGHT = Color3.fromRGB(120, 205, 255)
local BLUE_MAIN  = Color3.fromRGB( 64, 145, 255)
local BLUE_DEEP  = Color3.fromRGB( 28,  72, 165)
local CYAN_SOFT  = Color3.fromRGB(140, 245, 255)
local BG_COLOR   = Color3.fromRGB(  5,   9,  20)

local function getGuiParent()
	local ok, root = pcall(function() return (gethui and gethui()) end)
	if ok and root then return root end
	ok, root = pcall(function() return (get_hidden_gui and get_hidden_gui()) end)
	if ok and root then return root end
	ok, root = pcall(function() return (gethiddengui and gethiddengui()) end)
	if ok and root then return root end
	local pg = LocalPlayer:FindFirstChildOfClass("PlayerGui") or LocalPlayer:WaitForChild("PlayerGui", 5)
	return pg or game:GetService("CoreGui")
end

pcall(function()
	if _G.SDIntro_Stop then _G.SDIntro_Stop() end 
end)

local parent  = getGuiParent()
local running = true

local blur = Instance.new("BlurEffect")
blur.Size = 8
blur.Name = "SDIntroBlur" 
blur.Parent = Lighting

local sg = Instance.new("ScreenGui")
sg.Name = "SDIntroMAX" 
sg.IgnoreGuiInset = true
sg.ResetOnSpawn = false
pcall(function() if syn and syn.protect_gui then syn.protect_gui(sg) end end)
sg.Parent = parent


local bg = Instance.new("Frame")
bg.Size = UDim2.fromScale(1,1)
bg.BackgroundColor3 = BG_COLOR
bg.BackgroundTransparency = 0.25
bg.Parent = sg

local main = Instance.new("Frame")
main.Size = UDim2.fromOffset(CFG.size, CFG.size)
main.AnchorPoint = Vector2.new(0.5,0.5)
main.Position = UDim2.fromScale(0.5,0.5)
main.BackgroundTransparency = 1
main.Parent = sg

local ring = Instance.new("Frame")
ring.Size = UDim2.fromScale(1,1)
ring.BackgroundTransparency = 1
ring.Parent = main
local rCorner = Instance.new("UICorner"); rCorner.CornerRadius = UDim.new(0, CFG.corner); rCorner.Parent = ring
local rStroke = Instance.new("UIStroke")
rStroke.Thickness = CFG.thickness
rStroke.Color = BLUE_MAIN
pcall(function() rStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border end)
rStroke.Parent = ring

local glowRing = Instance.new("Frame")
glowRing.Size = UDim2.fromScale(1,1)
glowRing.BackgroundTransparency = 1
glowRing.ZIndex = -1
glowRing.Parent = main
local gCorner = Instance.new("UICorner"); gCorner.CornerRadius = UDim.new(0, CFG.corner); gCorner.Parent = glowRing
local gStroke = Instance.new("UIStroke")
gStroke.Thickness = CFG.thickness * 1.7
gStroke.Color = CYAN_SOFT
gStroke.Transparency = 0.7
pcall(function() gStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border end)
gStroke.Parent = glowRing

local inner = Instance.new("Frame")
inner.Size = UDim2.fromOffset(CFG.size - CFG.thickness*2, CFG.size - CFG.thickness*2)
inner.AnchorPoint = Vector2.new(0.5,0.5)
inner.Position = UDim2.fromScale(0.5,0.5)
inner.BackgroundTransparency = 1
inner.Parent = main

local title = Instance.new("TextLabel")
title.Size = UDim2.fromScale(0.9,0.4)
title.AnchorPoint = Vector2.new(0.5,0.5)
title.Position = UDim2.fromScale(0.5,0.40)
title.BackgroundTransparency = 1
title.Text = "SD" 
title.TextScaled = true
title.Font = Enum.Font.GothamBlack
title.TextColor3 = BLUE_MAIN
title.TextTransparency = 1
title.Parent = inner
local grad = Instance.new("UIGradient")
grad.Color = ColorSequence.new{
	ColorSequenceKeypoint.new(0.00, BLUE_LIGHT),
	ColorSequenceKeypoint.new(0.50, BLUE_MAIN),
	ColorSequenceKeypoint.new(1.00, BLUE_DEEP)
}
grad.Rotation = 25
grad.Parent = title

local sub = Instance.new("TextLabel")
sub.Size = UDim2.fromScale(0.6,0.2)
sub.AnchorPoint = Vector2.new(0.5,0.5)
sub.Position = UDim2.fromScale(0.5,0.65)
sub.BackgroundTransparency = 1
sub.Text = "HUB V2"
sub.TextScaled = true
sub.Font = Enum.Font.GothamMedium
sub.TextColor3 = BLUE_LIGHT
sub.TextTransparency = 1
sub.Parent = inner

task.spawn(function()
	while running do
		grad.Rotation = (grad.Rotation + 1) % 360
		task.wait(0.02)
	end
end)


-- REMOVED: Orb creation here (local orb = Instance.new("Frame")...)

-- REMOVED: Orb-related Spark function, as it used orb.Position
--[[
local function Spark()
	-- Removed spark logic
end
for i=1,12 do task.delay(i*0.01, Spark) end
--]]

local function CameraShake(ui)
	local orig = ui.Position
	for i = 1, 4 do
		ui.Position = orig + UDim2.fromOffset(math.random(-4,4), math.random(-4,4))
		task.wait(0.04)
	end
	ui.Position = orig
end
CameraShake(main)


local credit = Instance.new("TextLabel")
credit.Size = UDim2.fromOffset(220,20)
credit.AnchorPoint = Vector2.new(1,1)
credit.Position = UDim2.fromScale(0.985,0.985)
credit.BackgroundTransparency = 1
credit.Text = CFG.creditText
credit.TextColor3 = Color3.fromRGB(190,205,235)
credit.Font = Enum.Font.Gotham
credit.TextSize = 12
credit.TextTransparency = 1
credit.Parent = sg

local sweep = Instance.new("Frame")
sweep.BackgroundTransparency = 1
sweep.Size = UDim2.fromScale(1.2,1.2)
sweep.AnchorPoint = Vector2.new(0.5,0.5)
sweep.Position = UDim2.fromScale(-0.2,0.5)
sweep.Rotation = -15
sweep.ZIndex = 8
sweep.Parent = inner
local sweepGrad = Instance.new("UIGradient")
sweepGrad.Color = ColorSequence.new{
	ColorSequenceKeypoint.new(0.00, Color3.new(1,1,1)),
	ColorSequenceKeypoint.new(0.50, Color3.new(1,1,1)),
	ColorSequenceKeypoint.new(1.00, Color3.new(1,1,1)),
}
sweepGrad.Transparency = NumberSequence.new{
	NumberSequenceKeypoint.new(0.00,1.0),
	NumberSequenceKeypoint.new(0.48,0.25),
	NumberSequenceKeypoint.new(0.52,0.00),
	NumberSequenceKeypoint.new(0.56,0.25),
	NumberSequenceKeypoint.new(1.00,1.0),
}
sweepGrad.Parent = sweep


local bubbleFolder = Instance.new("Folder")
bubbleFolder.Name = "Bubbles"
bubbleFolder.Parent = main

local function makeBubble()
	local b = Instance.new("Frame")
	b.AnchorPoint = Vector2.new(0.5,0.5)
	b.Position = UDim2.fromScale(0.5,0.5)
	b.Size = UDim2.fromOffset(1,1)
	b.BackgroundTransparency = 1
	b.ZIndex = -2
	b.Parent = bubbleFolder
	local s = Instance.new("UIStroke")
	s.Thickness = 3
	s.Color = CYAN_SOFT
	s.Transparency = 0.1
	s.Parent = b
	local c = Instance.new("UICorner"); c.CornerRadius = UDim.new(1,999); c.Parent = b
	return b, s
end


local ringScale = Instance.new("UIScale"); ringScale.Scale = 1; ringScale.Parent = ring
local mainScale = Instance.new("UIScale"); mainScale.Scale = 1; mainScale.Parent = main


_G.SDIntro_Stop = function() 
	if not running then return end
	running = false
	if sg and sg.Parent then sg:Destroy() end
	if blur and blur.Parent then blur:Destroy() end
end

local ORIG = {
	rStroke = rStroke.Color,
	gStroke = gStroke.Color,
	titleGradient = grad.Color,
	sub = sub.TextColor3,
}

local function HSV(h, s, v) return Color3.fromHSV(h % 1, s, v) end

local function setTitleGradientFromHue(h)
	grad.Color = ColorSequence.new{
		ColorSequenceKeypoint.new(0.00, HSV(h,     1,1)),
		ColorSequenceKeypoint.new(0.50, HSV(h+0.15,1,1)),
		ColorSequenceKeypoint.new(1.00, HSV(h+0.30,1,1))
	}
end

local function RainbowBurst()
	local dur  = math.max(0.099, CFG.rainbowSeconds)
	local turns = CFG.rainbowTurns
	local start = os.clock()
	while running do
		local t = os.clock() - start
		if t > dur then break end
		local u = t / dur
		local h = u * turns
		rStroke.Color = HSV(h, 1, 1)
		gStroke.Color = HSV(h+0.08, 1, 1)
		setTitleGradientFromHue(h)
		sub.TextColor3 = HSV(h+0.22, 1, 1)
		RunService.Heartbeat:Wait()
	end


	rStroke.Color = ORIG.rStroke
	gStroke.Color = ORIG.gStroke
	grad.Color    = ORIG.titleGradient
	sub.TextColor3 = ORIG.sub
    
    -- White color transition after rainbow
    task.spawn(function()
        local white = Color3.fromRGB(255, 255, 255)
        local tweenDuration = 0.8 
        
        TweenService:Create(title,  TweenInfo.new(tweenDuration, Enum.EasingStyle.Sine, Enum.EasingDirection.Out), {TextColor3 = white}):Play()
        TweenService:Create(sub,    TweenInfo.new(tweenDuration, Enum.EasingStyle.Sine, Enum.EasingDirection.Out), {TextColor3 = white}):Play()
        TweenService:Create(rStroke,TweenInfo.new(tweenDuration, Enum.EasingStyle.Sine, Enum.EasingDirection.Out), {Color = white}):Play()
        TweenService:Create(gStroke,TweenInfo.new(tweenDuration, Enum.EasingStyle.Sine, Enum.EasingDirection.Out), {Color = white}):Play()

        -- Also change the gradient colors to all white for the title, so it stays white
        grad.Color = ColorSequence.new{
            ColorSequenceKeypoint.new(0.00, white),
            ColorSequenceKeypoint.new(0.50, white),
            ColorSequenceKeypoint.new(1.00, white)
        }
    end)
end


task.spawn(RainbowBurst)

-- CONTINUOUS SPIN LOGIC
task.spawn(function()
    local angle = 0
    -- Use Heartbeat to ensure smooth rotation based on frame time (dt)
    RunService.Heartbeat:Connect(function(dt)
        if not running then return end

        angle = (angle + CFG.spinSpeed * dt) % 360
        ring.Rotation = angle
        glowRing.Rotation = angle
    end)
end)

task.spawn(function()
	local flash = Instance.new("Frame")
	flash.Size = UDim2.fromScale(1,1)
	flash.BackgroundColor3 = Color3.new(1,1,1)
	flash.BackgroundTransparency = 1
	flash.ZIndex = 999
	flash.Parent = sg
	local fIn  = TweenService:Create(flash, TweenInfo.new(0.05), {BackgroundTransparency = 0.55})
	local fOut = TweenService:Create(flash, TweenInfo.new(0.12), {BackgroundTransparency = 1})
	fIn:Play(); fIn.Completed:Wait(); fOut:Play(); fOut.Completed:Wait()
	flash:Destroy()
end)

task.spawn(function()
	while running do
		TweenService:Create(ringScale, TweenInfo.new(1.2, Enum.EasingStyle.Sine, Enum.EasingDirection.Out), {Scale = CFG.breathMax}):Play()
		task.wait(1.2)
		TweenService:Create(ringScale, TweenInfo.new(1.2, Enum.EasingStyle.Sine, Enum.EasingDirection.In),  {Scale = CFG.breathMin}):Play()
		task.wait(1.2)
	end
end)

task.spawn(function()
	task.wait(0.3)
	TweenService:Create(title,  TweenInfo.new(0.8, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {TextTransparency = 0}):Play()
	task.wait(0.25)
	TweenService:Create(sub,    TweenInfo.new(0.6, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {TextTransparency = 0}):Play()
	TweenService:Create(credit, TweenInfo.new(0.6, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {TextTransparency = 0.2}):Play()
end)


local function BubblePop()

	local baseT = bg.BackgroundTransparency
	local flashDown = TweenService:Create(bg, TweenInfo.new(0.08, Enum.EasingStyle.Sine, Enum.EasingDirection.Out), {BackgroundTransparency = math.max(0, baseT - 0.12)})
	local flashUp   = TweenService:Create(bg, TweenInfo.new(0.18, Enum.EasingStyle.Sine, Enum.EasingDirection.In),  {BackgroundTransparency = baseT})
	flashDown:Play(); flashDown.Completed:Wait(); flashUp:Play()

	local oldThick = rStroke.Thickness
	local oldColor = rStroke.Color
	local boostA = TweenService:Create(rStroke, TweenInfo.new(0.08, Enum.EasingStyle.Quart, Enum.EasingDirection.Out), {Thickness = oldThick * 1.35, Color = CYAN_SOFT})
	local boostB = TweenService:Create(rStroke, TweenInfo.new(0.22, Enum.EasingStyle.Quad,  Enum.EasingDirection.In),  {Thickness = oldThick,               Color = oldColor})
	boostA:Play(); boostA.Completed:Wait(); boostB:Play()

	local thumpUp = TweenService:Create(mainScale, TweenInfo.new(0.08, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {Scale = 1.03})
	local thumpDn = TweenService:Create(mainScale, TweenInfo.new(0.20, Enum.EasingStyle.Quad,  Enum.EasingDirection.In),  {Scale = 1})
	thumpUp:Play(); thumpUp.Completed:Wait(); thumpDn:Play()

	for i = 1, CFG.bubbleCount do
		task.spawn(function()
			local b, s = makeBubble()
			local grow = TweenService:Create(b, TweenInfo.new(0.6, Enum.EasingStyle.Cubic, Enum.EasingDirection.Out), {Size = UDim2.fromOffset(CFG.size * CFG.bubbleScale, CFG.size * CFG.bubbleScale)})
			local fade = TweenService:Create(s, TweenInfo.new(0.6, Enum.EasingStyle.Sine,  Enum.EasingDirection.Out), {Transparency = 1})
			grow:Play(); fade:Play(); grow.Completed:Wait()
			b:Destroy()
		end)
		task.wait(CFG.bubbleGap)
	end
end

task.spawn(function()
	BubblePop()
end)

task.spawn(function()
	task.wait(0.25)
	local flash = Instance.new("Frame")
	flash.Size = UDim2.fromScale(1,1)
	flash.BackgroundColor3 = Color3.fromRGB(255,255,255)
	flash.BackgroundTransparency = 1
	flash.ZIndex = -5
	flash.Parent = sg
	local fIn  = TweenService:Create(flash, TweenInfo.new(0.08, Enum.EasingStyle.Sine,  Enum.EasingDirection.Out), {BackgroundTransparency = 0.6})
	local fOut = TweenService:Create(flash, TweenInfo.new(0.20, Enum.EasingStyle.Sine,  Enum.EasingDirection.In),  {BackgroundTransparency = 1})
	fIn:Play(); fIn.Completed:Wait(); fOut:Play(); fOut.Completed:Wait()
	flash:Destroy()
end)

task.spawn(function()
	task.wait(0.55)
	TweenService:Create(sweep, TweenInfo.new(1.1, Enum.EasingStyle.Sine, Enum.EasingDirection.Out), {Position = UDim2.fromScale(1.2, 0.5)}):Play()
end)

local function PulseRing()
	local ring = main:Clone()
	ring.Size = UDim2.fromOffset(0, 0)
	ring.BackgroundTransparency = 0.5
	ring.Parent = inner

	TweenService:Create(ring, TweenInfo.new(0.6, Enum.EasingStyle.Quart), {
		Size = UDim2.fromOffset(300, 300),
		BackgroundTransparency = 1
	}):Play()

	game:GetService("Debris"):AddItem(ring, 0.6)
end

if bubbleTween then bubbleTween.Completed:Connect(PulseRing) end
if popSound then popSound.Ended:Connect(PulseRing) end

if CFG.duration and CFG.duration > 0 then
	task.delay(CFG.duration, function()
		if not running then return end
		local fade = TweenInfo.new(0.55, Enum.EasingStyle.Quad, Enum.EasingDirection.InOut)
		
		-- 1. FADE OUT INTRO ELEMENTS
		TweenService:Create(rStroke,  fade, {Transparency = 1}):Play()
		TweenService:Create(gStroke,  fade, {Transparency = 1}):Play()
		TweenService:Create(title,    fade, {TextTransparency = 1}):Play()
		TweenService:Create(sub,      fade, {TextTransparency = 1}):Play()
		TweenService:Create(credit,   fade, {TextTransparency = 1}):Play()
		TweenService:Create(bg,       fade, {BackgroundTransparency = 1}):Play()
		
		task.wait(0.6)
		
		-- 2. STOP INTRO AND CLEANUP
		_G.SDIntro_Stop() 
        
        -- 3. EXECUTE MAIN SD HUB GUI SCRIPT HERE
        -- Note: The Services (Players, TweenService, UserInputService) are already declared.
        
        -- Player & GUI
        local player = Players.LocalPlayer
        local gui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
        gui.Name = "InteractiveGui"
        gui.ResetOnSpawn = false

        -- Common tween info 
        local tweenInfo = TweenInfo.new(0.5, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)

        -- ICON SETUP
        local icon = Instance.new("ImageButton")
        icon.Name = "Icon"
        icon.Size = UDim2.new(0, 60, 0, 60)
        icon.BackgroundTransparency = 1
        icon.Image = "rbxthumb://type=Asset&id=85963590267234&w=150&h=150"
        icon.AutoButtonColor = false
        icon.Active = true
        icon.Draggable = true
        icon.Parent = gui
        
        -- GLOW SETUP
        local glow = Instance.new("ImageLabel")
        glow.Name = "Glow"
        glow.Size = UDim2.new(1.8, 0, 1.8, 0)
        glow.Position = UDim2.new(-0.4, 0, -0.4, 0)
        glow.BackgroundTransparency = 1
        glow.Image = "rbxassetid://293507544"
        glow.ImageColor3 = Color3.new(1, 1, 1)
        glow.ImageTransparency = 0.3
        glow.Parent = icon

        -- NEW: ICON SPAWN & ANIMATION
        -- Final position: Center of the screen (0.5 scale, offset by -30 to center the 60px wide/tall icon)
        local FINAL_ICON_POS = UDim2.new(0.5, -30, 0.5, -30)
        
        -- Initial position: Off-center/forward (e.g., in the center of the screen, but transparent and small)
        icon.Position = UDim2.new(0.5, 0, 0.5, 0) -- Start point for tween
        icon.ImageTransparency = 1
        icon.Size = UDim2.new(0, 0, 0, 0)
        
        -- Tween the icon to its final centered position
        TweenService:Create(icon, TweenInfo.new(0.8, Enum.EasingStyle.Elastic, Enum.EasingDirection.Out), {
            Position = FINAL_ICON_POS,
            Size = UDim2.new(0, 60, 0, 60),
            ImageTransparency = 0
        }):Play()

        -- MAIN FRAME SETUP
        local mainFrame = Instance.new("Frame")
        mainFrame.Name = "MainFrame"
        mainFrame.Size = UDim2.new(0, 300, 0, 300)
        mainFrame.Position = UDim2.new(0.5, -150, 0.5, -150)
        mainFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
        mainFrame.BackgroundTransparency = 1
        mainFrame.Visible = false
        mainFrame.Active = true
        mainFrame.Draggable = true
        mainFrame.Parent = gui

        local frameCorner = Instance.new("UICorner", mainFrame)
        frameCorner.CornerRadius = UDim.new(0, 12)

        -- ANIMATED MONOCHROME CORNERS
        local cornerFrame = Instance.new("Frame", mainFrame)
        cornerFrame.Size = UDim2.new(1, 0, 1, 0)
        cornerFrame.Position = UDim2.new(0, 0, 0, 0)
        cornerFrame.BackgroundTransparency = 1

        local gradient = Instance.new("UIGradient", cornerFrame)
        gradient.Rotation = 45
        gradient.Color = ColorSequence.new{
            ColorSequenceKeypoint.new(0,   Color3.fromRGB(0,   0,   0)),
            ColorSequenceKeypoint.new(0.5, Color3.fromRGB(128, 128, 128)),
            ColorSequenceKeypoint.new(1,   Color3.fromRGB(255, 255, 255)),
        }

        task.spawn(function()
            while true do
                for i = 0, 1, 0.01 do
                    gradient.Offset = Vector2.new(i, i)
                    task.wait(0.05)
                end
            end
        end)

        -- TITLE
        local title = Instance.new("TextLabel")
        title.Name = "Title"
        title.Size = UDim2.new(1, 0, 0, 40)
        title.Position = UDim2.new(0, 0, 0, 0)
        title.BackgroundTransparency = 1
        title.Text = "SD Hub V2"
        title.TextColor3 = Color3.new(1, 1, 1)
        title.Font = Enum.Font.GothamBold
        title.TextScaled = true
        title.Parent = mainFrame

        -- SCROLLING FRAME FOR BUTTONS
        local scrollingFrame = Instance.new("ScrollingFrame")
        scrollingFrame.Name = "ButtonScroll"
        scrollingFrame.Size = UDim2.new(1, 0, 1, -50) -- Full width, height minus title/close button
        scrollingFrame.Position = UDim2.new(0, 0, 0, 45) -- Below title
        scrollingFrame.BackgroundTransparency = 1
        scrollingFrame.ScrollBarThickness = 6
        scrollingFrame.CanvasSize = UDim2.new(0, 0, 0, 0) -- Will be updated by UILayout
        scrollingFrame.Parent = mainFrame

        -- UI LIST LAYOUT
        local listLayout = Instance.new("UIListLayout")
        listLayout.FillDirection = Enum.FillDirection.Vertical
        listLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
        listLayout.Padding = UDim.new(0, 5) -- Spacing between buttons
        listLayout.Parent = scrollingFrame

        -- BUTTONS (Updated list with all 8 remaining scripts)
        local buttonNames = {
            "Chat anti ban",
            "Esp Rainbow",
            "Nameless Admin",
            "Username copyer",
            "Player Remover Client",
            "Admin commands",     
            "Yarhm r15 anims",    
            "Realistic Esp"       
        }

        for i, name in ipairs(buttonNames) do
            local btn = Instance.new("TextButton")
            btn.Name = name:gsub(" ", "")
            btn.Size = UDim2.new(0.9, 0, 0, 30)
            btn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
            btn.TextColor3 = Color3.new(1, 1, 1)
            btn.Font = Enum.Font.Gotham
            btn.Text = name
            btn.TextScaled = true
            btn.Parent = scrollingFrame -- Attach to ScrollingFrame

            local btnCorner = Instance.new("UICorner", btn)
            btnCorner.CornerRadius = UDim.new(0, 8)
        end
        
        -- Adjust CanvasSize after adding all buttons
        listLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
            scrollingFrame.CanvasSize = UDim2.new(0, 0, 0, listLayout.AbsoluteContentSize.Y + 10) -- +10 for a little extra padding
        end)

        -- MAP BUTTON NAMES TO SCRIPTS (Updated actions, ChatSpyer removed)
        local buttonActions = {
            Chatantiban = function()
                loadstring(game:HttpGet(
                  "https://raw.githubusercontent.com/101iii101/file/refs/heads/main/chat%20anti%20logger%20dark%20chat%20skidded%20and%20also%20fixed%20everytime%20you%20run%20it%20without%20already%20executed%20(1)%20(1)%20(1).txt"
                ))()
            end,
            EspRainbow = function()
                loadstring(game:HttpGet(
                  "https://raw.githubusercontent.com/101iii101/file/refs/heads/main/RAINBOW%20ESP%20AND%20NAME.txt"
                ))()
            end,
            NamelessAdmin = function()
                loadstring(game:HttpGet(
                  "https://raw.githubusercontent.com/101iii101/file/refs/heads/main/Nameless%20Admin%20Perm.txt"
                ))()
            end,
            Usernamecopyer = function()
                loadstring(game:HttpGet(
                  "https://raw.githubusercontent.com/101iii101/file/refs/heads/main/Username%20Copyer%20detector%20Gui%20V3%20(1)%20(2).txt"
                ))()
            end,
            PlayerRemoverClient = function()
                loadstring(game:HttpGet(
                  "https://raw.githubusercontent.com/101iii101/file/refs/heads/main/player%20remover%20gui%20V3%20Better%20modified%20(1)%20(2)%20(3).txt"
                ))()
            end,
            Admincommands = function() 
                loadstring(game:HttpGet(
                  "https://raw.githubusercontent.com/101iii101/file/refs/heads/main/Commands%20Admin%20script%20Skidded%20test.txt"
                ))()
            end,
            Yarhmr15anims = function() 
                loadstring(game:HttpGet(
                  "https://raw.githubusercontent.com/101iii101/file/refs/heads/main/FE%20animations%20MAX%20V1%20SKIDDED%20(1).txt"
                ))()
            end,
            RealisticEsp = function() 
                loadstring(game:HttpGet(
                  "https://raw.githubusercontent.com/101iii101/file/refs/heads/main/realistic%20Box%20Esp%20skidded%20(1)%20(1).txt"
                ))()
            end
        }

        -- HOOK BUTTON CLICKS TO ACTIONS
        for key, action in pairs(buttonActions) do
            local btn = scrollingFrame:FindFirstChild(key) -- Check in ScrollingFrame
            if btn then
                btn.MouseButton1Click:Connect(action)
            end
        end

        -- CLOSE BUTTON
        local closeBtn = Instance.new("TextButton")
        closeBtn.Name = "CloseBtn"
        closeBtn.Size = UDim2.new(0, 30, 0, 30)
        closeBtn.Position = UDim2.new(1, -35, 0, 5)
        closeBtn.Text = "X"
        closeBtn.TextColor3 = Color3.new(1, 1, 1)
        closeBtn.BackgroundColor3 = Color3.fromRGB(100, 0, 0)
        closeBtn.Parent = mainFrame

        local closeCorner = Instance.new("UICorner", closeBtn)
        closeCorner.CornerRadius = UDim.new(0, 8)

        -- ANIMATION FUNCTIONS
        local function flyAway(obj)
            local tween = TweenService:Create(obj, tweenInfo, {
                Size = UDim2.new(0, 0, 0, 0),
                Position = UDim2.new(0.5, 0, 0.5, 0),
                ImageTransparency = 1,
                BackgroundTransparency = 1
            })
            tween:Play()
            tween.Completed:Wait()
            obj.Visible = false
        end

        local function showMain()
            mainFrame.Size = UDim2.new(0, 0, 0, 0)
            mainFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
            mainFrame.BackgroundTransparency = 1
            mainFrame.Visible = true

            local tween = TweenService:Create(mainFrame, tweenInfo, {
                Size = UDim2.new(0, 300, 0, 300),
                Position = UDim2.new(0.5, -150, 0.5, -150),
                BackgroundTransparency = 0
            })
            tween:Play()
        end

        local function hideMain()
            local tween = TweenService:Create(mainFrame, tweenInfo, {
                Size = UDim2.new(0, 0, 0, 0),
                Position = UDim2.new(0.5, 0, 0.5, 0),
                BackgroundTransparency = 1
            })
            tween:Play()
            tween.Completed:Wait()
            mainFrame.Visible = false
        end

        -- TAP VS DRAG DETECTION FOR ICON
        local touchStart, threshold = nil, 10
        icon.InputBegan:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.Touch
            or input.UserInputType == Enum.UserInputType.MouseButton1 then
                touchStart = input.Position
            end
        end)
        icon.InputEnded:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.Touch
            or input.UserInputType == Enum.UserInputType.MouseButton1 then
                if touchStart then
                    local moved = (input.Position - touchStart).Magnitude
                    if moved < threshold then
                        flyAway(icon)
                        showMain()
                    end
                end
            end
        end)

        -- CLOSE BUTTON BEHAVIOR WITH SMOOTH ICON RETURN
        closeBtn.MouseButton1Click:Connect(function()
            hideMain()

            -- Reset icon & glow to start point for the new tween (center of screen, small, transparent)
            icon.Size = UDim2.new(0, 0, 0, 0)
            icon.Position = UDim2.new(0.5, 0, 0.5, 0) 
            icon.ImageTransparency = 1
            icon.BackgroundTransparency = 1
            icon.Visible = true

            -- Reset glow's visual properties for the tween
            glow.ImageTransparency = 1 -- Start glow as fully transparent

            -- Tween icon back to its final centered position
            local it = TweenService:Create(icon, TweenInfo.new(0.8, Enum.EasingStyle.Elastic, Enum.EasingDirection.Out), {
                Size = UDim2.new(0, 60, 0, 60),
                Position = FINAL_ICON_POS, -- Use the new final position (center of screen)
                ImageTransparency = 0,
                BackgroundTransparency = 1
            })
            it:Play()

            -- Tween glow back
            local gt = TweenService:Create(glow, tweenInfo, {
                ImageTransparency = 0.3
            })
            gt:Play()
        end)
        
	end)
end